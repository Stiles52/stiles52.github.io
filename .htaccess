RewriteEngine On

# =========================
# Page d'erreur 404
# =========================
#ErrorDocument 404 /404.html


# =========================
# Sécurité fichiers sensibles
# =========================
<FilesMatch "^(\.env|\.env\.example|composer\.(json|lock)|\.gitignore)$">
    Require all denied
</FilesMatch>

<FilesMatch "^vendor/.*$">
    Require all denied
</FilesMatch>


# =========================
# Masquer extensions .php et .html
# =========================
# ✅ Autoriser EXCLUSIVEMENT la page 404
RewriteRule ^404\.html$ - [L]

# ❌ Bloquer accès direct aux .php et .html
RewriteCond %{THE_REQUEST} \s/.*\.(php|html)[\s?] [NC]
RewriteRule ^ - [F,L]

# =========================
# URLs sans extension
# =========================
RewriteCond %{REQUEST_FILENAME} !-d

RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+)$ $1.php [L]

RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.+)$ $1.html [L]